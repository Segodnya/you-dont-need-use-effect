---
import { Code } from 'astro:components';

type CodeLanguage = Parameters<typeof Code>[0]['lang'];

export interface Props {
  code: string;
  language?: CodeLanguage;
  title?: string;
  highlight?: string;
  size?: 'sm' | 'base' | 'lg';
}

const { code, language = 'tsx', title, highlight, size = 'base' } = Astro.props;

const sizeClasses = {
  sm: 'text-xs',
  base: 'text-sm',
  lg: 'text-base',
};
---

<div class="code-block my-4">
  {
    title && (
      <div class="bg-gray-800 px-4 py-2 rounded-t-lg border-b border-gray-700">
        <span class="text-sm font-mono text-gray-400">{title}</span>
      </div>
    )
  }
  <div
    class={`overflow-x-auto bg-gray-900 p-4 ${title ? 'rounded-b-lg' : 'rounded-lg'} ${sizeClasses[size]}`}
  >
    <Code code={code} lang={language} theme="github-dark" />
  </div>
</div>
