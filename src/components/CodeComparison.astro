---
/**
 * CodeComparison - Side-by-side code comparison component
 *
 * Displays bad vs good code examples with appropriate visual styling.
 * Uses red theme for bad examples and green theme for good examples.
 */

import { Code } from 'astro:components';
import GlassCard from './ui/GlassCard.astro';
import { BORDER_COLORS, BACKGROUND_COLORS } from '../lib/constants';

export interface Props {
  badCode: string;
  goodCode: string;
  language?: any;
  badTitle?: string;
  goodTitle?: string;
}

const {
  badCode,
  goodCode,
  language = 'tsx',
  badTitle = '❌ Плохой пример',
  goodTitle = '✅ Правильное решение',
} = Astro.props;
---

<div
  class="code-comparison grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 my-6 items-stretch"
>
  <!-- Bad Example -->
  <div class="flex">
    <GlassCard color="red" class="w-full" padding="p-0">
      <div
        class={`border-2 ${BORDER_COLORS.red} ${BACKGROUND_COLORS.red} rounded-xl h-full flex flex-col`}
      >
        <div class="p-4 lg:p-6 flex-1 flex flex-col">
          <div class="flex items-center mb-4 shrink-0">
            <div class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
            <h3 class="text-lg font-semibold text-red-400">{badTitle}</h3>
          </div>
          <div
            class="text-sm overflow-x-auto bg-gray-900 rounded-lg p-4 flex-1 min-h-0"
          >
            <Code code={badCode} lang={language} theme="github-dark" />
          </div>
        </div>
      </div>
    </GlassCard>
  </div>

  <!-- Good Example -->
  <div class="flex">
    <GlassCard color="green" class="w-full" padding="p-0">
      <div
        class={`border-2 ${BORDER_COLORS.green} ${BACKGROUND_COLORS.green} rounded-xl h-full flex flex-col`}
      >
        <div class="p-4 lg:p-6 flex-1 flex flex-col">
          <div class="flex items-center mb-4 shrink-0">
            <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
            <h3 class="text-lg font-semibold text-green-400">{goodTitle}</h3>
          </div>
          <div
            class="text-sm overflow-x-auto bg-gray-900 rounded-lg p-4 flex-1 min-h-0"
          >
            <Code code={goodCode} lang={language} theme="github-dark" />
          </div>
        </div>
      </div>
    </GlassCard>
  </div>
</div>
