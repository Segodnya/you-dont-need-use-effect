---
import BaseSlide from './BaseSlide.astro';
import SteppedCodeComparison from '../SteppedCodeComparison.astro';
import Text from '../ui/Text.astro';
import Callout from '../ui/Callout.astro';
import Section from '../ui/Section.astro';
---

<BaseSlide
  id="adjusting-state"
  title="6. Корректировка состояния при изменении пропсов"
>
  <Section>
    <Text>
      Эффект, который сбрасывает состояние при изменении пропса -
      распространенный паттерн, но он не оптимален.
    </Text>

    <SteppedCodeComparison
      carouselId="adjusting-state-comparison"
      badCode={`function List({ items }) {
  const [selection, setSelection] = useState();

  useEffect(() => {
    setSelection(null);
  }, [items]);
}`}
      goodCode={`function List({ items, selection, onSelectionChange }) {
  // Вся логика управления состоянием у родителя
  return (
    <div>
      {items.map(item => (
        // ...
      ))}
    </div>
  );
}`}
      language="tsx"
    />

    <Callout variant="tip">
      Делайте компонент полностью контролируемым или используйте проп key (см.
      следующий слайд).
    </Callout>
  </Section>
</BaseSlide>
