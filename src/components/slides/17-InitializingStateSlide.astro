---
import BaseSlide from './BaseSlide.astro';
import CodeComparison from '../CodeComparison.astro';
import Text from '../ui/Text.astro';
import Callout from '../ui/Callout.astro';
import Section from '../ui/Section.astro';
---

<BaseSlide
  id="initializing-state"
  title="10. Инициализация состояния в эффекте"
>
  <Section>
    <Text> Зачем делать два рендера, когда можно сделать один? </Text>

    <CodeComparison
      badCode={`function MyComponent() {
  const [state, setState] = useState();

  useEffect(() => {
    setState("Hello"); // Инициализация в эффекте
  }, []);
}`}
      goodCode={`// Простая инициализация
function MyComponent() {
  const [state, setState] = useState("Hello");
}

// Ленивая инициализация для дорогих вычислений
function ExpensiveComponent() {
  const [state, setState] = useState(() => {
    return expensiveCalculation();
  });
}`}
      language="tsx"
    />

    <Callout variant="tip">
      Функция в useState выполняется только при первом рендере, а эффект с
      пустыми зависимостями выполняется после рендера, вызывая дополнительное
      обновление.
    </Callout>
  </Section>
</BaseSlide>
