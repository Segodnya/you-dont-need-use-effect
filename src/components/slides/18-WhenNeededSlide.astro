---
import BaseSlide from './BaseSlide.astro';
import CodeBlock from '../CodeBlock.astro';
import Carousel from '../Carousel.astro';
---

<BaseSlide id="when-needed" title="–ö–æ–≥–¥–∞ useEffect –Ω—É–∂–µ–Ω">
  <div class="space-y-6">
    <p class="text-lg text-gray-300">
      –ß—Ç–æ–±—ã –Ω–µ —Å–ª–æ–∂–∏–ª–æ—Å—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ, —á—Ç–æ useEffect ‚Äî —ç—Ç–æ –∑–ª–æ, –¥–∞–≤–∞–π—Ç–µ —á–µ—Ç–∫–æ –æ–±–æ–∑–Ω–∞—á–∏–º –µ–≥–æ –∑–∞–∫–æ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.
    </p>

    <Carousel id="when-needed-carousel">
      <div class="carousel-item bg-green-900/20 border border-green-700 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-green-400 mb-3">
          1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º
        </h3>
        <CodeBlock
          code={`// LocalStorage
useEffect(() => {
  localStorage.setItem('theme', theme);
}, [theme]);

// document.title
useEffect(() => {
  document.title = \`\${count} new\`;
}, [count]);`}
          language="tsx"
          size="sm"
        />
      </div>

      <div class="carousel-item bg-green-900/20 border border-green-700 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-green-400 mb-3">
          2. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
        </h3>
        <CodeBlock
          code={`useEffect(() => {
  const handleOnline = () => 
    setIsOnline(true);
  
  window.addEventListener(
    'online', handleOnline
  );

  return () => 
    window.removeEventListener(
      'online', handleOnline
    );
}, []);`}
          language="tsx"
          size="sm"
        />
      </div>

      <div class="carousel-item bg-green-900/20 border border-green-700 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-green-400 mb-3">
          3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–µ-React –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏
        </h3>
        <CodeBlock
          code={`useEffect(() => {
  const chart = new ChartJS(
    ref.current,
    { ...config, data }
  );

  return () => chart.destroy();
}, [data]);`}
          language="tsx"
          size="sm"
        />
      </div>

      <div class="carousel-item bg-green-900/20 border border-green-700 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-green-400 mb-3">
          4. –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö (—Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é)
        </h3>
        <CodeBlock
          code={`useEffect(() => {
  let ignore = false;

  fetchData().then(data => {
    if (!ignore) setData(data);
  });

  return () => { ignore = true; };
}, [query]);`}
          language="tsx"
          size="sm"
        />
      </div>
    </Carousel>

    <div class="bg-purple-900/20 border border-purple-700 rounded-lg p-4 mt-6">
      <p class="text-purple-200 text-base font-semibold">
        <span class="text-xl">üîë</span> –ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –ï—Å–ª–∏ –≤–∞—à —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –∫–∞–∫–æ–π-–ª–∏–±–æ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π, –∑–∞–¥–∞–π—Ç–µ —Å–µ–±–µ –≤–æ–ø—Ä–æ—Å: "–ê –º–æ–∂–Ω–æ –ª–∏ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ?"
      </p>
    </div>
  </div>
</BaseSlide>
