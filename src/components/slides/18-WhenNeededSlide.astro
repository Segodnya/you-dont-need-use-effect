---
import BaseSlide from './BaseSlide.astro';
import CodeBlock from '../CodeBlock.astro';
import Carousel from '../Carousel.astro';
import Text from '../ui/Text.astro';
import Callout from '../ui/Callout.astro';
import Section from '../ui/Section.astro';
import SlideTitle from '../ui/SlideTitle.astro';
import Card from '../ui/Card.astro';
---

<BaseSlide id="when-needed" title="–ö–æ–≥–¥–∞ useEffect –Ω—É–∂–µ–Ω">
  <Section>
    <Text>
      –ß—Ç–æ–±—ã –Ω–µ —Å–ª–æ–∂–∏–ª–æ—Å—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ, —á—Ç–æ useEffect ‚Äî —ç—Ç–æ –∑–ª–æ, –¥–∞–≤–∞–π—Ç–µ —á–µ—Ç–∫–æ –æ–±–æ–∑–Ω–∞—á–∏–º –µ–≥–æ –∑–∞–∫–æ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.
    </Text>

    <Carousel id="when-needed-carousel">
      <Card color="green" class="carousel-item">
        <SlideTitle size="md" color="green" class="mb-3">
          1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º
        </SlideTitle>
        <CodeBlock
          code={`// LocalStorage
useEffect(() => {
  localStorage.setItem('theme', theme);
}, [theme]);

// document.title
useEffect(() => {
  document.title = \`\${count} new\`;
}, [count]);`}
          language="tsx"
          size="sm"
        />
      </Card>

      <Card color="green" class="carousel-item">
        <SlideTitle size="md" color="green" class="mb-3">
          2. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
        </SlideTitle>
        <CodeBlock
          code={`useEffect(() => {
  const handleOnline = () => setIsOnline(true);
  window.addEventListener('online', handleOnline);

  return () => window.removeEventListener('online', handleOnline);
}, []);`}
          language="tsx"
          size="sm"
        />
      </Card>

      <Card color="green" class="carousel-item">
        <SlideTitle size="md" color="green" class="mb-3">
          3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–µ-React –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏
        </SlideTitle>
        <CodeBlock
          code={`useEffect(() => {
  const chart = new ChartJS(ref.current, { ...config, data });

  return () => chart.destroy();
}, [data]);`}
          language="tsx"
          size="sm"
        />
      </Card>

      <Card color="green" class="carousel-item">
        <SlideTitle size="md" color="green" class="mb-3">
          4. –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö (—Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é)
        </SlideTitle>
        <CodeBlock
          code={`useEffect(() => {
  let ignore = false;

  fetchData().then(data => {
    if (!ignore) setData(data);
  });

  return () => { ignore = true; };
}, [query]);`}
          language="tsx"
          size="sm"
        />
      </Card>
    </Carousel>

    <Callout variant="primary" icon="üîë" class="mt-6">
      <Text class="font-semibold">
        –ï—Å–ª–∏ –≤–∞—à —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –∫–∞–∫–æ–π-–ª–∏–±–æ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π, –∑–∞–¥–∞–π—Ç–µ —Å–µ–±–µ –≤–æ–ø—Ä–æ—Å: "–ê –º–æ–∂–Ω–æ –ª–∏ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ?"
      </Text>
    </Callout>
  </Section>
</BaseSlide>
