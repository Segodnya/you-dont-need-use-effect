---
import BaseSlide from './BaseSlide.astro';
import CodeComparison from '../CodeComparison.astro';
import Text from '../ui/Text.astro';
import Callout from '../ui/Callout.astro';
import Section from '../ui/Section.astro';
---

<BaseSlide id="derived-state" title="3. Производное состояние">
  <Section>
    <Text>
      Избегайте useEffect для вычисления производных значений
    </Text>

    <CodeComparison
      badCode={`function Form({ firstName, lastName }) {
  const [fullName, setFullName] = useState('');
  
  useEffect(() => {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
  
  return <div>{fullName}</div>;
}`}
      goodCode={`function Form({ firstName, lastName }) {
  // Вычисляем напрямую во время рендера
  const fullName = firstName + ' ' + lastName;
  
  return <div>{fullName}</div>;
}`}
      language="tsx"
    />

    <Callout variant="tip">
      Вычисляйте значения напрямую во время рендера! Если вычисление
      дорогое — используйте <code class="text-cyan-300">useMemo</code>.
    </Callout>
  </Section>
</BaseSlide>
