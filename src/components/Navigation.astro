---
export interface Props {
  slides: Array<{ id: string; title: string }>;
}

const { slides } = Astro.props;
---

<!-- Side Navigation Dots -->
<nav
  class="fixed right-8 top-1/2 transform -translate-y-1/2 space-y-3 z-50 hidden lg:block"
  aria-label="Навигация по слайдам"
>
  {
    slides.map((slide, index) => (
      <a
        href={`#${slide.id}`}
        class="nav-dot block w-3 h-3 bg-gray-600 rounded-full hover:bg-blue-400 transition-all duration-300 hover:scale-125 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-900"
        title={slide.title}
        aria-label={`Перейти к слайду: ${slide.title}`}
        x-bind:class={`currentSlide === ${index} ? 'bg-blue-500 scale-125' : 'bg-gray-600'`}
      />
    ))
  }
</nav>

<!-- Navigation Buttons -->
<div class="fixed bottom-8 left-1/2 transform -translate-x-1/2 flex items-center gap-4 z-50">
  <!-- Previous Button -->
  <button
    id="prev-slide-btn"
    class="nav-button bg-gray-800/80 backdrop-blur-sm hover:bg-gray-700/90 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100"
    aria-label="Предыдущий слайд"
    title="Предыдущий слайд"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </button>

  <!-- Fullscreen Button -->
  <button
    id="fullscreen-btn"
    class="nav-button bg-gray-800/80 backdrop-blur-sm hover:bg-gray-700/90 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-400"
    aria-label="Полноэкранный режим"
    title="Полноэкранный режим"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
    </svg>
  </button>

  <!-- Next Button -->
  <button
    id="next-slide-btn"
    class="nav-button bg-gray-800/80 backdrop-blur-sm hover:bg-gray-700/90 text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100"
    aria-label="Следующий слайд"
    title="Следующий слайд"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </button>
</div>

<!-- Progress Bar -->
<div
  class="fixed top-0 left-0 w-full h-1 bg-gray-800 z-50"
  role="progressbar"
  aria-label="Прогресс презентации"
>
  <div
    id="scroll-progress"
    class="h-full bg-linear-to-r from-blue-500 via-cyan-500 to-purple-500 transition-all duration-300"
    style="width: 0%"
  >
  </div>
</div>

<!-- Slide Counter (Mobile) -->
<div
  class="fixed bottom-4 right-4 lg:hidden z-50 bg-gray-800/80 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-mono"
>
  <span x-text="`${currentSlide + 1} / ${totalSlides}`"></span>
</div>
